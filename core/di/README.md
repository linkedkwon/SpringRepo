# 의존성 주입 DI(Dependency Injection)
<a href="http://melonicedlatte.com/">
    <img src="https://img.shields.io/badge/Spring-red"
        style="height : auto; margin-left : 8px; margin-right : 8px;"/>
    <img src="https://img.shields.io/badge/Core-orange"
        style="height : auto; margin-left : 8px; margin-right : 8px;"/>
    <img src="https://img.shields.io/badge/DI-yellow"
        style="height : auto; margin-left : 8px; margin-right : 8px;"/>
</a>

## 1. Spring DI란?
`Spring`의 `DI`란 **의존 관계에 있는 객체에 의존 객체를 외부에서 주입시키는 방식을 의미**한다. 이는 객체의 생성과 사용의 관심사를 
분리시키기 위한 설계법으로 `의존 역전 원칙(DIP, Dependency Injection Principle)`을 기반으로 한다. 추상화를 통해 저수준 모듈이 
고수준 모듈을 의존하게 만들어 객체 관계의 결합도를 낮추고 유연성을 확보시켜 준다. 기본적으로 매개변수 전달 방식을 기본으로 동작하며, Java의 
경우는 객체 사이에 **인터페이스나 추상 클래스를 두어 주입**이 가능하다. 또한 Spring에서는 의존 관계를 빈 설정(Bean Definition) 정보를 
바탕으로 **컨테이너가 자동으로 주입**하는 기능을 제공하고 있다.

![di](https://user-images.githubusercontent.com/78818063/175834971-58f5b897-6ac4-4f29-93d7-6e0d6ea0518b.png)

<br>

## 2. 기존 주입 방식
그렇다면 DI를 보다 자세히 이해하기 위해 기존에는 객체 간 의존성 주입을 어떻게 수행했는지, 또 어떤 문제점이 있었는지 아래 항목에서 알아보자. 

  * ### 내부 객체 ###
    가장 기본적인 방법으로 객체의 의존성을 주입하기 위해 **클래스 내부에 필요한 의존 객체를 개발자가 직접 생성**하여 사용하였다. 
    보통 객체의 **인스턴스화가 일어날 때 의존 객체를 함께 초기화하거나 특정 시점에 별도로 초기화**한다. 해당 방식은 이렇게 아래 코드와 
    같이 인스턴스를 내부에 포함시키고 있어 두 객체가 **서로 강하게 결합**되어 있다.

    ![innerClass](https://user-images.githubusercontent.com/78818063/175834973-5af22ab2-a84e-4d39-9758-ba156094c1f6.png)

  * ### 위 방식의 문제점 ###
    객체 내부에 의존 객체를 두는 방식은 객체가 서로 종속되어 결합도가 높아지기 때문에 **간단한 작업에서 해당 인스턴스를 생성하면 
    비용이 낭비**되는 문제가 발생한다.

    ![coupled](https://user-images.githubusercontent.com/78818063/175834977-44b66a6a-3ad6-4496-9315-440fe5173906.png)

    또한 부분적인 수정 또는 유지보수에 있어 **모듈 전체에 대한 관리**가 필요하므로 해당 작업에 있어 매우 비효율적인 모습을 보인다. 
    즉 의존 **객체의 기능이 추가되거나 변경되어 사용 방식이 바뀌면 해당 객체를 포함한 객체의 수정 또한 불가피**하다.
    
<br>

## 3. DIP 기반 의존성 주입
앞서 내부 객체를 통한 의존성 주입과 문제점에 대해 살펴 보았는데, 이를 막기 위해서는 **의존 객체를 분리시켜 외부에서 주입**받는 것이 
바람직하다. 아래 코드와 같이 필요한 의존 객체를 `인터페이스`나 `추상 클래스`를 통해 추상화하여 **부품처럼 사용**함으로서 객체 간 
**결합도를 낮출 수 있고 더욱 다양한 의존 관계를 맺을 수 있다**. 

![dip](https://user-images.githubusercontent.com/78818063/175834979-abaf0e2b-fcc9-451d-a2df-6e3bf0d8539d.png)

이처럼 의존 객체를 외부에서 주입시키는 방법은 객체들로 하여금 `POJO(Plain Old Java Object)` **상태의 기본 단위를 유지**시킨다. 
객체 간의 결합도를 낮추어 **관심사를 분리하면 각 객체는 자신의 역할 수행에만 집중할 수 있으며**`(단일 책임 원칙)`, 기술 대체나 수정과 
같은 작업에서 **부분적인 코드만 변경하면 되므로**`(개방 폐쇄 원칙)` 높은 유연성을 제공한다. 또한 **높은 가독성, 테스트 용이, 코드 
재사용성 등의 여러 장점**들을 함께 가질 수 있다. 이처럼 외부로부터의 의존성 주입은 객체 지향 설계 원칙의 가장 근간이 되는 기술 중 하나로 
애플리케이션의 객체 간 관계를 보다 효율적으로 정의할 수 있다.  

<br>
